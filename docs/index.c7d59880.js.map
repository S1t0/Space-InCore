{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-7da6664fa06765a7.js","src/Actor.ts","actors/Disparo.ts","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-29ee50a8bd3fab56.js","actors/Tanque.ts","utils/FPSviewer.ts","node_modules/@parcel/runtime-js/lib/runtime-e827d8d28d0cea29.js","actors/Aliens.ts","utils/checklimits.ts","src/script.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"6qpDd\\\":\\\"index.c7d59880.js\\\",\\\"75jqP\\\":\\\"nave.b0b44531.png\\\",\\\"23Qje\\\":\\\"alien.a16c6eb6.png\\\"}\"));","import { Point } from \"./point\";\r\nexport interface IActor{\r\n    position:Point;\r\n    update:(ctx:CanvasRenderingContext2D,delta:number) => void;\r\n    keyboard_event?:(key:string)=>void;\r\n    draw:(ctx:CanvasRenderingContext2D, delta:number)=>void;\r\n\r\n}\r\nexport class Actor implements IActor{\r\n    position:Point;\r\n    constructor(position:Point){\r\n        this.position=position;   \r\n\r\n    }\r\n    update(ctx:CanvasRenderingContext2D,delta:number){};\r\n    draw(ctx:CanvasRenderingContext2D,delta:number){};\r\n    keyboard_event(key:string){};\r\n\r\n}\r\n","import { Point } from \"../src/point\";\r\nexport class Disparo {\r\n  velocidad: number;\r\n  position: Point;\r\n  ancho: number;\r\n  alto: number;\r\n  constructor(position: Point) {\r\n    this.velocidad = 2;\r\n    this.ancho = 4;\r\n    this.alto = 5;\r\n    this.position=position;\r\n    \r\n  }\r\n\r\n  update(ctx: CanvasRenderingContext2D, delta: number) {\r\n    let newPos:Point={\r\n      x:this.position.x,\r\n      y:this.position.y-this.velocidad\r\n    };\r\n    this.position=newPos;\r\n  }\r\n  draw(ctx: CanvasRenderingContext2D, delta: number) {\r\n    ctx.fillStyle = \"red\";\r\n    ctx.fillRect(\r\n      this.position.x,\r\n      this.position.y,\r\n      this.ancho,\r\n      this.alto\r\n     \r\n    );\r\n  }\r\n  keyboard_event(key:string){\r\n    //let newPosY = this.position.y + this.velocidad;\r\n    \r\n\r\n}\r\n}\r\nfunction delta(ctx: any, CanvasRenderingContext2D: { new(): CanvasRenderingContext2D; prototype: CanvasRenderingContext2D; }, delta: any, number: any) {\r\n  throw new Error(\"Function not implemented.\");\r\n}\r\n\r\n","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('6qpDd') + require('./helpers/bundle-manifest').resolve(\"75jqP\");","import { Actor, IActor } from \"../src/Actor\";\r\nimport { Point } from \"../src/point\";\r\nimport { Disparo } from \"./Disparo\";\r\nimport {actors} from \"../src/script\";\r\nconst imagenTanque = require(\"../public/img/nave.png\"); //me daba fallo con el import\r\n\r\n\r\nexport class Tanque extends Actor implements IActor {\r\n  actorAlto: number;\r\n  actorAncho: number;\r\n  position: Point;\r\n  moveSpeed: number;\r\n  canvas: CanvasRenderingContext2D;\r\n  image: HTMLImageElement;\r\n  canvasAncho: 800;\r\n  static newPosX: number;\r\n  static newPox: number;\r\n  constructor(position: Point, canvas: CanvasRenderingContext2D) {\r\n    super(position);\r\n    this.actorAlto = 40;\r\n    this.actorAncho = 70;\r\n    this.position = position;\r\n\r\n    this.image = new Image();\r\n    this.image.src = imagenTanque;\r\n    this.moveSpeed = 5;\r\n    this.canvas = canvas;\r\n    this.canvasAncho = 800;\r\n  }\r\n  update(ctx: CanvasRenderingContext2D, delta: number) {}\r\n  draw(ctx: CanvasRenderingContext2D, delta: number) {\r\n    let position = this.position;\r\n    let alto = this.actorAlto;\r\n    let ancho = this.actorAncho;\r\n    ctx.drawImage(this.image, this.position.x, this.position.y, alto, ancho);\r\n  }\r\n\r\n  keyboard_event(key: string) {\r\n    let newPosX = this.position.x + this.moveSpeed;\r\n    switch (key) {\r\n      case `ArrowRight`:\r\n        if (this.canvasAncho - 25 > newPosX) {\r\n          this.position.x = newPosX;\r\n        }\r\n        break;\r\n      case `ArrowLeft`:\r\n        newPosX = this.position.x - this.moveSpeed;\r\n        if (0 <= newPosX) {\r\n          this.position.x = newPosX;\r\n        }\r\n        break;\r\n          case ` `:\r\n            for(let i=0;i<Disparo.length;i++){\r\n              actors.push(new Disparo({x:newPosX+11,y:500}))\r\n              \r\n            }\r\n            break;\r\n      };\r\n    }\r\n  }\r\n\r\n","import { Actor } from \"../src/Actor\";\r\nimport { Point } from \"../src/point\";\r\nexport class FPSviewer extends Actor{\r\n\tupdate(ctx:CanvasRenderingContext2D,delta:number){};\r\n\tdraw(ctx:CanvasRenderingContext2D,delta:number) {\r\n\t\tconst fps = (1 / delta).toFixed(0);\r\n\t\t ctx.font='18px Arial';\r\n\t\t ctx.fillStyle=\"white\";\r\n\t\t ctx.fillText(`FPS:${fps}`, this.position.x, this.position.y);\r\n\t}\r\n}\r\n","module.exports = require('./helpers/bundle-url').getBundleURL('6qpDd') + require('./helpers/bundle-manifest').resolve(\"23Qje\");","import { Point } from \"../src/point\";\r\nimport { Actor, IActor } from \"../src/Actor\";\r\nimport { checkLimits } from \"../utils/checklimits\";\r\nimport { actors } from \"../src/script\";\r\nconst imagenAlien = require(\"../public/img/alien.png\");\r\n\r\nexport class Alien extends Actor implements IActor {\r\n  actorAlto: number;\r\n  actorAncho: number;\r\n  position: Point;\r\n  image: HTMLImageElement;\r\n  moveSpeed: number;\r\n  aliens: Alien[];\r\n  canvas: CanvasRenderingContext2D;\r\n\r\n  constructor(position: Point, canvas: CanvasRenderingContext2D) {\r\n    super(position);\r\n    this.actorAlto = 35;\r\n    this.actorAncho = 30;\r\n    this.position = position;\r\n    this.image = new Image();\r\n    this.image.src = imagenAlien;\r\n    this.moveSpeed = 35;\r\n    this.aliens = [];\r\n    this.canvas = canvas;\r\n  }\r\n  update(ctx: CanvasRenderingContext2D, delta: number) {\r\n    let newPos:Point={\r\n      x:this.position.x,\r\n      y:this.position.y\r\n    }\r\n    if(checkLimits(newPos)){\r\n      this.position.x+this.moveSpeed;\r\n      this.position.x=newPos.x;\r\n\r\n    }\r\n  }\r\n  draw(ctx: CanvasRenderingContext2D, delta: number) {\r\n    ctx.drawImage(\r\n      this.image,\r\n      this.position.x,\r\n      this.position.y,\r\n      this.actorAlto,\r\n      this.actorAncho\r\n    );\r\n  }\r\n\r\n  }\r\n\r\n","import { Point } from \"../src/point\";\r\n\r\nexport const checkLimits = (position:Point) => {\r\n\tif (\r\n\t\tposition.x < 740 && \r\n\t\tposition.x > 10 &&\r\n\t\tposition.y < 500 &&\r\n\t\tposition.y > 0\r\n\t) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n};","import { Tanque } from \"../actors/Tanque\";\r\nimport { Actor } from \"../src/Actor\";\r\nimport { FPSviewer } from \"../utils/FPSviewer\";\r\nimport { Alien } from \"../actors/Aliens\";\r\nimport { Disparo } from \"../actors/Disparo\";\r\n\r\nexport let actors: Actor[] = [];\r\n\r\n\r\nwindow.onload = () => {\r\n   var canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\n   var ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\r\n  actors.push(new Tanque({ x: 400, y: 500 }, ctx));\r\n  actors.push(new FPSviewer({ x: 15, y: 25 }));\r\n  for (let fila = 0; fila < 5; fila++) {//hago el bucle en el script, porque al hacerlo la clase Alien, no se movian correctamente\r\n    for (let colum = 0; colum < 11; colum++) {\r\n      actors.push(new Alien({ x: 40 + colum * 50, y: 40 + fila * 50 }, ctx));\r\n    }\r\n  }\r\n  console.log(Tanque.newPosX);\r\n  let lastFrame = 0;\r\n  const render = (time: number) => {\r\n    let delta = (time - lastFrame) / 1000;\r\n    lastFrame = time;\r\n    actors.forEach((e) => e.update(ctx, delta));\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    actors.forEach((e) => {\r\n      e.draw(ctx, delta);\r\n    });\r\n   \r\n\r\n    window.requestAnimationFrame(render);\r\n  };\r\n  window.requestAnimationFrame(render);\r\n\r\n  document.body.addEventListener(\"keydown\", (e) => {\r\n    actors.forEach((a) => {\r\n      a.keyboard_event(e.key);\r\n    });\r\n  });\r\n};\r\n"],"names":["$8b4d1930797b255e$export$6503ec6e8aabbaf","$8b4d1930797b255e$export$f7ad0328861e2f03","$8b4d1930797b255e$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$6e6491cc4eb8f55b$export$f73d3eb6fd876d80","position","this","update","ctx","delta","draw","ctx1","delta1","keyboard_event","key","$b11953db3245ee50$export$1f7059b068445048","velocidad","ancho","alto","newPos","x","y","fillStyle","fillRect","$f29cd6c67ea13581$export$bdfd709ae4826697","$f29cd6c67ea13581$var$bundleURL","$f29cd6c67ea13581$var$getBaseURL","url","replace","value","err","matches","stack","match","$f29cd6c67ea13581$var$getBundleURL","$12017bd188a63f79$exports","getBundleURL","resolve","$db2da46770f31972$export$7de990b5b198f3a2","canvas","super","actorAlto","actorAncho","image","Image","src","moveSpeed","canvasAncho","drawImage","newPosX","$82cb6605d4cfa1b9$export$5874838115283e2","push","$9db3fc2b243d80cd$export$c2add218418bab48","fps","toFixed","font","fillText","$fbe29c716ade7e37$exports","$88790e70099d61f4$export$b0a8d99267aa7907","aliens","window","onload","document","getElementById","getContext","fila","colum","console","log","lastFrame","render","time","forEach","e","clearRect","width","height","requestAnimationFrame","body","addEventListener","a"],"version":3,"file":"index.c7d59880.js.map"}